<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Laporan ESG - Ringkasan</title>
  <!-- Asumsikan Tailwind sudah terpasang di project -->
</head>
<body class="bg-slate-100 text-slate-900">
  <main class="max-w-6xl mx-auto px-6 py-10">

    <div class="flex justify-end gap-3">


    <!-- Download Button -->
    <button class="relative h-12 w-[70px]">
        <div class="inline-flex items-center justify-center gap-2 px-6 py-3 h-12 bg-orange-500 rounded-xl w-full hover:bg-orange-600 transition">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="download-icon">
            <path d="M5 20H19V18H5V20ZM19 9H15V3H9V9H5L12 16L19 9Z" fill="white"></path>
        </svg>
        </div>
    </button>
    </div>


    <!-- Header -->
    <header class="mb-8">
      <h1 class="text-3xl md:text-4xl font-bold">Laporan ESG</h1>
      <p class="text-slate-500 mt-1">Economic, Environmental, Social, and Governance – Ringkasan Pengisian</p>
    </header>

    <!-- Executive Summary -->
    <section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
      <h2 class="text-2xl font-semibold text-teal-700">Executive Summary</h2>
      <p class="mt-3 text-slate-600">
        Laporan ini merangkum kemajuan pengisian indikator ESG. Beberapa area masih
        memerlukan kelengkapan data, terutama emisi (Scope 1–3), bukti pelatihan K3,
        serta pelaporan risk management.
      </p>

    </section>

      <section class="w-full">
  <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8">
    <h2 class="text-2xl md:text-3xl font-semibold text-teal-700">Overall Score & Disclosure</h2>
    <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 mt-6">
      <div class="p-4 rounded-xl border border-blue-100 bg-blue-50/40">
        <div class="text-sm text-gray-600">Economic</div>
        <div class="text-3xl font-bold text-blue-700">{{scores.economic}}%</div>
      </div>
      <div class="p-4 rounded-xl border border-teal-100 bg-teal-50/40">
        <div class="text-sm text-gray-600">Environmental</div>
        <div class="text-3xl font-bold text-teal-700">74%</div>
      </div>
      <div class="p-4 rounded-xl border border-orange-100 bg-orange-50/40">
        <div class="text-sm text-gray-600">Social</div>
        <div class="text-3xl font-bold text-orange-600">78%</div>
      </div>
      <div class="p-4 rounded-xl border border-lime-100 bg-lime-50/40">
        <div class="text-sm text-gray-600">Governance</div>
        <div class="text-3xl font-bold text-lime-700">85%</div>
      </div>
    </div>

    <div class="mt-6 p-4 rounded-xl bg-slate-50 border border-slate-200">
      <div class="text-sm text-gray-600">Total ESG Disclosure</div>
      <div class="text-2xl font-bold text-slate-800">{{scores.overall}}%</div>
    </div>
  </div>
</section>

<section class="w-full mt-8 grid grid-cols-1 lg:grid-cols-4 gap-6">
  <article class="bg-white rounded-2xl shadow-2xl p-6">
    <header class="flex items-center justify-between">
      <h3 class="text-xl font-semibold text-blue-700">Economic</h3>
      <span class="text-2xl font-bold text-blue-700">{{scores.economic}}%</span>
    </header>
    <ul class="mt-5 space-y-4">
      <li>
        <div class="flex items-center justify-between text-sm mb-1">
          <span class="text-gray-600">Revenue & Expenses</span>
          <span class="font-semibold text-slate-800">
            {{#if scores}}
              {{#if scores.revenue}}
                lengkap
              {{else}}
                Belum Lengkap
              {{/if}}
            {{else}}
              Belum Lengkap
            {{/if}}
          </span>
        </div>
      </li>
    </ul>
  </article>

  <article class="bg-white rounded-2xl shadow-2xl p-6">
    <header class="flex items-center justify-between">
      <h3 class="text-xl font-semibold text-teal-700">Environmental</h3>
      <span class="text-2xl font-bold text-teal-700">74%</span>
    </header>
    <div class="p-4 text-center text-gray-500">
      <p>Data belum tersedia.</p>
    </div>
  </article>

  <article class="bg-white rounded-2xl shadow-2xl p-6">
    <header class="flex items-center justify-between">
      <h3 class="text-xl font-semibold text-orange-600">Social</h3>
      <span class="text-2xl font-bold text-orange-600">78%</span>
    </header>
    <div class="p-4 text-center text-gray-500">
      <p>Data belum tersedia.</p>
    </div>
  </article>

  <article class="bg-white rounded-2xl shadow-2xl p-6">
    <header class="flex items-center justify-between">
      <h3 class="text-xl font-semibold text-lime-700">Governance</h3>
      <span class="text-2xl font-bold text-lime-700">85%</span>
    </header>
    <div class="p-4 text-center text-gray-500">
      <p>Data belum tersedia.</p>
    </div>
  </article>
</section>


    <!-- 1) Informasi Umum Perusahaan -->
    <section class="bg-white rounded-2xl shadow-xl p-6 mt-8 mb-8">
  <h2 class="text-2xl font-semibold text-teal-700">Informasi Umum Perusahaan</h2>
  <div class="mt-4 grid md:grid-cols-2 gap-4 text-sm">
    <div>
      <div class="text-slate-500">Nama Organisasi/Perusahaan</div>
      <div class="font-medium">{{business.business_name}}</div>
    </div>
    <div>
      <div class="text-slate-500">Tahun Berdiri</div>
      <div class="font-medium">{{business.established_year}}</div>
    </div>
    <div class="md:col-span-2">
      <div class="text-slate-500">Legal Form/Status Kepemilikan</div>
      <div class="font-medium">{{business.legal_form}}</div>
    </div>
    <div>
      <div class="text-slate-500">Lokasi Kantor Pusat (HQ)</div>
      <div class="font-medium">{{business.headquarters}}</div>
    </div>
    <div>
      <div class="text-slate-500">Lokasi Operasional (Kota/Provinsi/Region)</div>
      <div class="font-medium">{{business.city}}, {{business.province}}</div>
    </div>
  </div>
</section>


<section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
  <h2 class="text-2xl font-semibold text-teal-700">Aktivitas & Operasional</h2>
  <div class="mt-4 grid md:grid-cols-2 gap-4 text-sm">
    <div class="md:col-span-2">
      <div class="text-slate-500">Jenis Kegiatan/Industri Utama</div>
      <div class="font-medium">{{business.industry_type}}</div>
    </div>
    <div class="md:col-span-2">
      <div class="text-slate-500">Daftar Merek/Brand yang Dimiliki</div>
      <div class="font-medium">{{business.business_name}}</div>
    </div>
    <div class="md:col-span-2">
      <div class="text-slate-500">Produk/Jasa yang Ditawarkan</div>
      <div class="font-medium">{{business.products_offered}}</div>
    </div>
  </div>
</section>


<section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
  <h2 class="text-2xl font-semibold text-teal-700">Informasi Kepemilikan</h2>
  <div class="mt-4 grid md:grid-cols-2 gap-4 text-sm">
    {{#if shareholders.length}}
      {{#each shareholders}}
      <div>
        <div class="text-slate-500">Pemilik/Shareholders Utama</div>
        <div class="font-medium">{{this.shareholder_name}}</div>
      </div>
      <div>
        <div class="text-slate-500">Persentase Kepemilikan</div>
        <div class="font-medium">{{this.ownership_percentage}}%</div>
      </div>
      {{/each}}
    {{else}}
      <div class="md:col-span-2">
        <p class="text-slate-500">Data kepemilikan belum tersedia.</p>
      </div>
    {{/if}}
  </div>
</section>


<section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
  <h2 class="text-2xl font-semibold text-teal-700">Pasar yang Dilayani</h2>
  <div class="mt-4 grid md:grid-cols-2 gap-4 text-sm">
    <div>
      <div class="text-slate-500">Wilayah Operasi</div>
      <div class="font-medium">{{business.market_scope}}</div>
    </div>
    <div>
      <div class="text-slate-500">Target Market</div>
      <div class="font-medium">{{business.target_market}}</div>
    </div>
  </div>
</section>


<section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
  <h2 class="text-2xl font-semibold text-teal-700">Informasi Karyawan & Pekerja</h2>
  <div class="mt-4 grid md:grid-cols-3 gap-4 text-sm">
    <div>
      <div class="text-slate-500">Total Karyawan (Full-Time)</div>
      <div class="font-medium">{{business.total_employees_fulltime}}</div>
    </div>
    <div>
      <div class="text-slate-500">Pekerja Paruh Waktu/Outsourcing</div>
      <div class="font-medium">{{business.total_employees_parttime}}</div>
    </div>
    <div>
      <div class="text-slate-500">Komposisi Gender (opsional)</div>
      <div class="font-medium">% Laki-laki: {{business.male_percentage}} | % Perempuan: {{business.female_percentage}}</div>
    </div>
    <div class="md:col-span-3">
      <div class="text-slate-500">Jumlah Karyawan per Departemen</div>
      <div class="font-medium">
        {{#if departments.length}}
          <ul class="list-disc pl-5 mt-1">
            {{#each departments}}
              <li>{{this.department_name}}: {{this.employee_count}} orang</li>
            {{/each}}
            <li>employee: 250 orang</li>
            <li>operatiol & production: 130 orang</li>
          </ul>
        {{else}}
          Data belum tersedia.
        {{/if}}
      </div>
    </div>
  </div>
</section>

<section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
  <h2 class="text-2xl font-semibold text-teal-700">Nilai, Prinsip, dan Standar</h2>
  <div class="mt-4 grid md:grid-cols-2 gap-4 text-sm">
    <div class="md:col-span-2">
      <div class="text-slate-500">Core Values Perusahaan</div>
      <div class="font-medium">{{business.core_values}}</div>
    </div>
    <div class="md:col-span-2">
      <div class="text-slate-500">Prinsip/Kode Etik yang Diterapkan</div>
      <div class="font-medium">{{business.ethics_principles}}</div>
    </div>
    <div class="md:col-span-2">
      <div class="text-slate-500">Sertifikasi/Standar yang Dimiliki</div>
      <div class="font-medium">
        {{#if certifications.length}}
          <ul class="list-disc pl-5 mt-1">
            {{#each certifications}}
              <li>{{this.certification_name}}</li>
            {{/each}}
          </ul>
        {{else}}
          Data belum tersedia.
        {{/if}}
      </div>
    </div>
  </div>
</section>

<section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
  <h2 class="text-2xl font-semibold text-teal-700">Pemangku Kepentingan (Stakeholders)</h2>
  <div class="mt-4 grid md:grid-cols-2 gap-4 text-sm">
    <div class="md:col-span-2">
      <div class="text-slate-500">Kelompok Pemangku Kepentingan</div>
      <div class="font-medium">
        {{#if stakeholders.length}}
          <ul class="list-disc pl-5 mt-1">
            {{#each stakeholders}}
              <li>
                {{this.stakeholder_type}}
                {{#if this.stakeholder_other}}
                  ({{this.stakeholder_other}})
                {{/if}}
                {{#if this.relationship}}
                  (Hubungan: {{this.relationship}})
                {{/if}}
              </li>
            {{/each}}
          </ul>
        {{else}}
          Data belum tersedia.
        {{/if}}
      </div>
    </div>
  </div>
</section>

<section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
  <h2 class="text-2xl font-semibold text-teal-700">Kontak & Dokumen Pendukung</h2>
  <div class="mt-4 grid md:grid-cols-2 gap-4 text-sm">
    <div>
      <div class="text-slate-500">Nama Kontak Utama</div>
      <div class="font-medium">{{business.pic_name}}</div>
    </div>
    <div>
      <div class="text-slate-500">Posisi/Jabatan</div>
      <div class="font-medium">{{business.pic_position}}</div>
    </div>
    <div class="md:col-span-2">
      <div class="text-slate-500">Email & Nomor Telepon</div>
      <div class="font-medium">{{business.pic_email}} / {{business.pic_phone}}</div>
    </div>
    <div class="md:col-span-2">
      <div class="text-slate-500">Dokumen Pendukung (opsional)</div>
      <div class="font-medium">Link/arsip: {{business.supporting_documents}}</div>
    </div>
  </div>
</section>


    <section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
  <div class="flex items-center justify-between">
    <h2 class="text-2xl font-semibold text-teal-700">Economic (GRI Economic)</h2>
    {{#if economic}}
      {{#if economic.revenue}}
        <span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-700">Status: Terisi</span>
      {{else}}
        <span class="text-xs px-2 py-1 rounded-full bg-orange-100 text-orange-700">Status: Parsial</span>
      {{/if}}
    {{else}}
      <span class="text-xs px-2 py-1 rounded-full bg-red-100 text-red-700">Status: Belum Terisi</span>
    {{/if}}
  </div>

  <details class="group mt-4 rounded-xl border" {{#if economic}}open{{/if}}>
    <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
      <div class="font-semibold">Bagian 1 – Informasi Dasar</div>
      <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
    </summary>
    <div class="px-4 pb-4 text-sm grid md:grid-cols-3 gap-4">
      <div>
        <div class="text-slate-500">Nama Unit/Departemen</div>
        <div class="font-medium">{{economic.unit_name}}</div>
      </div>
      <div>
        <div class="text-slate-500">Periode Pelaporan</div>
        <div class="font-medium">{{economic.reporting_period}}</div>
      </div>
      <div>
        <div class="text-slate-500">Penanggung Jawab</div>
        <div class="font-medium">{{economic.responsible_person}}</div>
      </div>
    </div>
  </details>

  <details class="group mt-3 rounded-xl border">
    <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
      <div class="font-semibold">Bagian 2 – Pendapatan & Pengeluaran</div>
      <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
    </summary>
    <div class="px-4 pb-4 text-sm grid md:grid-cols-2 gap-4">
      <div>
        <div class="text-slate-500">Pendapatan</div>
        <div class="font-medium">Rp {{economic.revenue}}</div>
      </div>
      <div class="p-3 rounded-lg border {{#if economic.general_admin_expenses}}border-green-300 bg-green-50{{else}}border-red-300 bg-red-50{{/if}}">
        <div class="text-slate-500">General & Administrative</div>
        <div class="font-medium">
          Rp {{economic.general_admin_expenses}}
          {{#unless economic.general_admin_expenses}}
            <span class="ml-2 text-red-600 text-xs">Perlu diisi</span>
          {{/unless}}
        </div>
      </div>
      <div>
        <div class="text-slate-500">Gaji & Upah</div>
        <div class="font-medium">
          Rp {{economic.salary_expenses}} (Karyawan: {{economic.total_employees}})
        </div>
      </div>
      <div>
        <div class="text-slate-500">Transportasi</div>
        <div class="font-medium">Rp {{economic.transport_expenses}}</div>
      </div>
      <div>
        <div class="text-slate-500">Bahan Bakar | Listrik</div>
        <div class="font-medium">Rp {{economic.fuel_expenses}} | Rp {{economic.electricity_expenses}}</div>
      </div>
      <div>
        <div class="text-slate-500">Internet | Telepon | Air</div>
        <div class="font-medium">Rp {{economic.internet_expenses}} | Rp {{economic.telephone_expenses}} | Rp {{economic.water_expenses}}</div>
      </div>
      <div>
        <div class="text-slate-500">Operasional Lainnya</div>
        <div class="font-medium">Rp {{economic.other_operating_expenses}}</div>
      </div>
      <div>
        <div class="text-slate-500">Non-Operasional</div>
        <div class="font-medium">Rp {{economic.non_operating_expenses}}</div>
      </div>
    </div>
  </details>

  <details class="group mt-3 rounded-xl border">
    <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
      <div class="font-semibold">Bagian 3 – Catatan Tambahan</div>
      <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
    </summary>
    <div class="px-4 pb-4 text-sm grid md:grid-cols-2 gap-4">
      <div>
        <div class="text-slate-500">Pengeluaran besar/tidak biasa</div>
        <div class="font-medium">
          {{#if economic.unusual_expenses}}Ya → {{economic.unusual_expenses}}{{else}}Tidak{{/if}}
        </div>
      </div>
      <div>
        <div class="text-slate-500">Koreksi akuntansi</div>
        <div class="font-medium">
          {{#if economic.accounting_corrections}}Ya → {{economic.accounting_corrections}}{{else}}Tidak{{/if}}
        </div>
      </div>
    </div>
  </details>
</section>

    <!-- ENVIRONMENTAL (1 Section) -->
    <section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <div>
          <h2 class="text-2xl font-semibold text-teal-700">Environmental (GRI Environmental)</h2>
          <p class="text-sm text-gray-500 mt-1">Emission</p>
        </div>
        <span class="text-xs px-2 py-1 rounded-full bg-orange-100 text-orange-700">Status: Parsial</span>
      </div>


      <!-- Scope 1 -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Scope 1</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="scope1_emission"></span>
            Total emisi Scope 1 (tCO₂e)
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="scope1_source"></span>
            Jenis sumber emisi utama
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="scope1_reduction"></span>
            Inisiatif pengurangan Scope 1
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="scope1_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <!-- Validasi Isi untuk Scope 1 -->
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const scope1Emission = "100";  // Misal ini diambil dari inputan pengguna
          const scope1Source = "Kendaraan Operasional";  // Dapatkan ini dari dropdown atau inputan
          const scope1Reduction = "";  // Jika ini kosong, akan menjadi ❌

          // Periksa apakah data diisi untuk Scope 1
          document.getElementById('scope1_emission').textContent = scope1Emission ? "✅" : "❌";
          document.getElementById('scope1_source').textContent = scope1Source ? "✅" : "❌";
          document.getElementById('scope1_reduction').textContent = scope1Reduction ? "✅" : "❌";
          
          // Set status akhir
          const status = (scope1Emission && scope1Source && scope1Reduction) ? "complete" : "incomplete";
          document.getElementById('scope1_status').textContent = status;
        });
      </script>

      <!-- Scope 2 -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Scope 2</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="scope2_energy"></span>
            Jenis energi utama yang digunakan
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="scope2_reduction"></span>
            Inisiatif pengurangan Scope 2
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="scope2_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <!-- Validasi Isi untuk Scope 2 -->
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const scope2Energy = "Listrik PLN";  // Misal ini diambil dari dropdown
          const scope2Reduction = "Ya";  // Jika ada pengurangan, ini menjadi 'Ya', jika tidak 'Tidak'

          // Validasi untuk Scope 2
          document.getElementById('scope2_energy').textContent = scope2Energy ? "✅" : "❌";
          document.getElementById('scope2_reduction').textContent = scope2Reduction ? "✅" : "❌";
          
          // Set status akhir
          const status = (scope2Energy && scope2Reduction) ? "complete" : "incomplete";
          document.getElementById('scope2_status').textContent = status;
        });
      </script>

      <!-- Scope 3 -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Scope 3</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="scope3_calculation"></span>
            Apakah perusahaan menghitung emisi Scope 3?
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="scope3_source"></span>
            Sumber utama emisi Scope 3
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="scope3_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <!-- Validasi Isi untuk Scope 3 -->
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const scope3Calculation = "Ya";  // Misal ini diambil dari dropdown
          const scope3Source = "Transportasi Pihak Ketiga";  // Misal ini diambil dari dropdown

          // Validasi untuk Scope 3
          document.getElementById('scope3_calculation').textContent = scope3Calculation ? "✅" : "❌";
          document.getElementById('scope3_source').textContent = scope3Source ? "✅" : "❌";
          
          // Set status akhir
          const status = (scope3Calculation && scope3Source) ? "complete" : "incomplete";
          document.getElementById('scope3_status').textContent = status;
        });
      </script>

      <!-- Intensitas Emisi -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Intensitas Emisi</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="intensity_indicator"></span>
            Jenis indikator intensitas yang digunakan
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="intensity_value"></span>
            Total emisi per indikator
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="intensity_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <!-- Validasi Isi untuk Intensitas Emisi -->
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const intensityIndicator = "tCO₂e per unit produk";  // Misal ini diambil dari dropdown
          const intensityValue = "100";  // Misal ini diambil dari input angka

          // Validasi untuk Intensitas Emisi
          document.getElementById('intensity_indicator').textContent = intensityIndicator ? "✅" : "❌";
          document.getElementById('intensity_value').textContent = intensityValue ? "✅" : "❌";
          
          // Set status akhir
          const status = (intensityIndicator && intensityValue) ? "complete" : "incomplete";
          document.getElementById('intensity_status').textContent = status;
        });
      </script>

      <!-- Catatan Tambahan -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Catatan Tambahan</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="data_challenges"></span>
            Kendala dalam pengumpulan data
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="improvement_plan"></span>
            Rencana peningkatan pengelolaan emisi
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="data_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <!-- Validasi Isi untuk Catatan Tambahan -->
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const dataChallenges = "Tantangan pengumpulan data";  // Dapatkan ini dari input
          const improvementPlan = "Rencana perbaikan pengelolaan emisi";  // Dapatkan ini dari input

          // Validasi untuk Catatan Tambahan
          document.getElementById('data_challenges').textContent = dataChallenges ? "✅" : "❌";
          document.getElementById('improvement_plan').textContent = improvementPlan ? "✅" : "❌";
          
          // Set status akhir
          const status = (dataChallenges && improvementPlan) ? "complete" : "incomplete";
          document.getElementById('data_status').textContent = status;
        });
      </script>

    </section>


    <!-- SOCIAL (1 Section) -->
    <section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <div>
          <h2 class="text-2xl font-semibold text-teal-700">Social (GRI Social)</h2>
          <p class="text-sm text-gray-500 mt-1">Kesehatan & Keselamatan Kerja (K3)</p>
        </div>
        <span class="text-xs px-2 py-1 rounded-full bg-orange-100 text-orange-700">Status: Parsial</span>
      </div>

      <!-- Bagian 1: Informasi Umum K3 -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Informasi Umum K3</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="k3_policy"></span>
            Apakah perusahaan memiliki kebijakan K3?
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="k3_committee"></span>
            Apakah ada komite/penanggung jawab K3?
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="k3_info_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const k3Policy = "Ya";  
          const k3Committee = "Ya";  

          document.getElementById('k3_policy').textContent = k3Policy ? "✅" : "❌";
          document.getElementById('k3_committee').textContent = k3Committee ? "✅" : "❌";

          const status = (k3Policy && k3Committee) ? "complete" : "incomplete";
          document.getElementById('k3_info_status').textContent = status;
        });
      </script>

      <!-- Bagian 2: Kecelakaan Kerja -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Kecelakaan Kerja</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="work_accidents"></span>
            Jumlah kecelakaan kerja
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="fatalities"></span>
            Jumlah kecelakaan fatal
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="work_accident_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const workAccidents = "5";  
          const fatalities = "0";  

          document.getElementById('work_accidents').textContent = workAccidents ? "✅" : "❌";
          document.getElementById('fatalities').textContent = fatalities ? "✅" : "❌";

          const status = (workAccidents && fatalities) ? "complete" : "incomplete";
          document.getElementById('work_accident_status').textContent = status;
        });
      </script>

      <!-- Bagian 3: Penyakit Akibat Kerja -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Penyakit Akibat Kerja</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="occupational_disease"></span>
            Jumlah kasus penyakit akibat kerja
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="disease_type"></span>
            Jenis penyakit dominan
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="disease_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const occupationalDisease = "3";  
          const diseaseType = "Gangguan pernapasan";  

          document.getElementById('occupational_disease').textContent = occupationalDisease ? "✅" : "❌";
          document.getElementById('disease_type').textContent = diseaseType ? "✅" : "❌";

          const status = (occupationalDisease && diseaseType) ? "complete" : "incomplete";
          document.getElementById('disease_status').textContent = status;
        });
      </script>

      <!-- Bagian 4: Pelatihan K3 -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Pelatihan K3</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="training_program"></span>
            Apakah ada program pelatihan K3?
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="training_participants"></span>
            Jumlah peserta pelatihan
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="training_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const trainingProgram = "Ya";  
          const trainingParticipants = "50";  

          document.getElementById('training_program').textContent = trainingProgram ? "✅" : "❌";
          document.getElementById('training_participants').textContent = trainingParticipants ? "✅" : "❌";

          const status = (trainingProgram && trainingParticipants) ? "complete" : "incomplete";
          document.getElementById('training_status').textContent = status;
        });
      </script>

      <!-- Bagian 5: Catatan & Konteks -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Catatan & Konteks</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="k3_challenges"></span>
            Kendala penerapan K3
          </div>
          <div class="flex items-center gap-2">
            <span class="text-emerald-600" id="k3_improvement"></span>
            Rencana peningkatan K3
          </div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">
            Kesimpulan: <span id="notes_status" class="font-semibold">incomplete</span>.
          </div>
        </div>
      </details>

      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const k3Challenges = "Kurangnya APD lengkap";  
          const k3Improvement = "Rencana pembelian APD baru";  

          document.getElementById('k3_challenges').textContent = k3Challenges ? "✅" : "❌";
          document.getElementById('k3_improvement').textContent = k3Improvement ? "✅" : "❌";

          const status = (k3Challenges && k3Improvement) ? "complete" : "incomplete";
          document.getElementById('notes_status').textContent = status;
        });
      </script>

    </section>


    <!-- GOVERNANCE (1 Section) -->
    <section class="bg-white rounded-2xl shadow-xl p-6 mb-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <div>
          <h2 class="text-2xl font-semibold text-teal-700">Governance (GRI Governance)</h2>
          <p class="text-sm text-gray-500 mt-1">Struktur, Kebijakan & Implementasi</p>
        </div>
        <span class="text-xs px-2 py-1 rounded-full bg-emerald-100 text-emerald-700">Status: Parsial</span>
      </div>

      <!-- Bagian 1: Informasi Umum -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Informasi Umum</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2"><span id="gov_entity" class="text-emerald-600"></span> Nama entitas / unit bisnis</div>
          <div class="flex items-center gap-2"><span id="gov_location" class="text-emerald-600"></span> Lokasi operasional</div>
          <div class="flex items-center gap-2"><span id="gov_period" class="text-emerald-600"></span> Periode pelaporan</div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">Kesimpulan: <span id="gov_info_status" class="font-semibold">incomplete</span>.</div>
        </div>
      </details>

      <!-- Bagian 2: Daftar Kebijakan Perusahaan -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Daftar Kebijakan Perusahaan</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2"><span id="gov_code" class="text-emerald-600"></span> Code of Conduct</div>
          <div class="flex items-center gap-2"><span id="gov_anti" class="text-emerald-600"></span> Anti-Corruption Policy</div>
          <div class="flex items-center gap-2"><span id="gov_whistle" class="text-emerald-600"></span> Whistleblowing Policy</div>
          <div class="flex items-center gap-2"><span id="gov_hs" class="text-emerald-600"></span> Health & Safety Policy</div>
          <div class="flex items-center gap-2"><span id="gov_other" class="text-emerald-600"></span> Kebijakan lain (Diversity, Data Privacy, dll)</div>
          <div class="flex items-center gap-2"><span id="gov_year" class="text-emerald-600"></span> Tahun penerapan terakhir</div>
          <div class="flex items-center gap-2"><span id="gov_link" class="text-emerald-600"></span> Link / Dokumen kebijakan</div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">Kesimpulan: <span id="gov_policy_status" class="font-semibold">incomplete</span>.</div>
        </div>
      </details>

      <!-- Bagian 3: Penerapan & Implementasi -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Penerapan & Implementasi</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2"><span id="gov_socialized" class="text-emerald-600"></span> Apakah kebijakan disosialisasikan?</div>
          <div class="flex items-center gap-2"><span id="gov_method" class="text-emerald-600"></span> Metode sosialisasi</div>
          <div class="flex items-center gap-2"><span id="gov_training_count" class="text-emerald-600"></span> Jumlah pelatihan terkait kebijakan</div>
          <div class="flex items-center gap-2"><span id="gov_training_percent" class="text-emerald-600"></span> % karyawan ikut pelatihan</div>
          <div class="flex items-center gap-2"><span id="gov_supervision" class="text-emerald-600"></span> Ada mekanisme pengawasan?</div>
          <div class="flex items-center gap-2"><span id="gov_supervision_form" class="text-emerald-600"></span> Bentuk mekanisme pengawasan</div>
          <div class="flex items-center gap-2"><span id="gov_eval" class="text-emerald-600"></span> Evaluasi kebijakan?</div>
          <div class="flex items-center gap-2"><span id="gov_eval_freq" class="text-emerald-600"></span> Frekuensi evaluasi</div>
          <div class="flex items-center gap-2"><span id="gov_notes" class="text-emerald-600"></span> Catatan / kendala</div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">Kesimpulan: <span id="gov_impl_status" class="font-semibold">incomplete</span>.</div>
        </div>
      </details>

      <!-- Bagian 4: Bukti & Dokumentasi -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Bukti & Dokumentasi</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <div class="flex items-center gap-2"><span id="gov_doc1" class="text-emerald-600"></span> Dokumen kebijakan / bukti sosialisasi</div>
          <div class="flex items-center gap-2"><span id="gov_doc2" class="text-emerald-600"></span> Laporan audit / evaluasi kebijakan</div>
          <div class="rounded-lg bg-amber-50 border border-amber-200 p-3 text-amber-800">Kesimpulan: <span id="gov_doc_status" class="font-semibold">incomplete</span>.</div>
        </div>
      </details>

      <!-- Opsional: Skor Kepatuhan Internal -->
      <details class="group mt-4 rounded-xl border">
        <summary class="flex items-center justify-between cursor-pointer gap-4 p-4">
          <div class="font-semibold">Skor Kepatuhan Internal</div>
          <span class="text-slate-400 group-open:rotate-180 transition">▼</span>
        </summary>
        <div class="px-4 pb-4 text-sm space-y-2">
          <p>Level <span id="gov_score"></span> – <span id="gov_score_desc"></span></p>
        </div>
      </details>
    </section>

    <!-- Script Dummy Governance -->
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        // Bagian 1
        const entity = "PT Contoh Sejahtera";
        const location = "Kantor Pusat";
        const period = "Tahunan";
        document.getElementById('gov_entity').textContent = entity ? "✅" : "❌";
        document.getElementById('gov_location').textContent = location ? "✅" : "❌";
        document.getElementById('gov_period').textContent = period ? "✅" : "❌";
        document.getElementById('gov_info_status').textContent = (entity && location && period) ? "complete" : "incomplete";

        // Bagian 2
        const code = "Ya";
        const anti = "Ya";
        const whistle = "Sedang disusun";
        const hs = "Ya";
        const other = "Diversity Policy";
        const year = "2023";
        const link = "https://example.com/policy";
        document.getElementById('gov_code').textContent = code ? "✅" : "❌";
        document.getElementById('gov_anti').textContent = anti ? "✅" : "❌";
        document.getElementById('gov_whistle').textContent = whistle ? "✅" : "❌";
        document.getElementById('gov_hs').textContent = hs ? "✅" : "❌";
        document.getElementById('gov_other').textContent = other ? "✅" : "❌";
        document.getElementById('gov_year').textContent = year ? "✅" : "❌";
        document.getElementById('gov_link').textContent = link ? "✅" : "❌";
        document.getElementById('gov_policy_status').textContent = (code && anti && whistle && hs && other && year && link) ? "complete" : "incomplete";

        // Bagian 3
        const socialized = "Ya";
        const method = "Workshop";
        const trainingCount = "3";
        const trainingPercent = "80";
        const supervision = "Ya";
        const supervisionForm = "Audit internal";
        const evalPolicy = "Ya";
        const evalFreq = "Tahunan";
        const notes = "Kurangnya partisipasi cabang";
        document.getElementById('gov_socialized').textContent = socialized ? "✅" : "❌";
        document.getElementById('gov_method').textContent = method ? "✅" : "❌";
        document.getElementById('gov_training_count').textContent = trainingCount ? "✅" : "❌";
        document.getElementById('gov_training_percent').textContent = trainingPercent ? "✅" : "❌";
        document.getElementById('gov_supervision').textContent = supervision ? "✅" : "❌";
        document.getElementById('gov_supervision_form').textContent = supervisionForm ? "✅" : "❌";
        document.getElementById('gov_eval').textContent = evalPolicy ? "✅" : "❌";
        document.getElementById('gov_eval_freq').textContent = evalFreq ? "✅" : "❌";
        document.getElementById('gov_notes').textContent = notes ? "✅" : "❌";
        document.getElementById('gov_impl_status').textContent = (socialized && method && trainingCount && trainingPercent && supervision && supervisionForm && evalPolicy && evalFreq && notes) ? "complete" : "incomplete";

        // Bagian 4
        const doc1 = "https://example.com/bukti.pdf";
        const doc2 = "";
        document.getElementById('gov_doc1').textContent = doc1 ? "✅" : "❌";
        document.getElementById('gov_doc2').textContent = doc2 ? "✅" : "❌";
        document.getElementById('gov_doc_status').textContent = (doc1 && doc2) ? "complete" : "incomplete";

        // Skor Opsional
        const score = 2;
        const scoreDesc = score === 1 ? "Awal (Basic)" : score === 2 ? "Berkembang (Intermediate)" : "Matang (Advanced)";
        document.getElementById('gov_score').textContent = score;
        document.getElementById('gov_score_desc').textContent = scoreDesc;
      });
    </script>


    <section
  id="reco_section"
  class="bg-white rounded-2xl shadow-xl p-6 mb-8"
  data-score-economic="{{scores.economic}}"
  data-score-environmental="74"
  data-score-social="78"
  data-score-governance="85"
>
  <h2 class="text-2xl font-semibold text-teal-700">Rekomendasi Akhir</h2>

  <div id="reco_badges" class="flex flex-wrap gap-2 mt-3 text-sm"></div>

  <ul id="reco_list" class="list-disc pl-6 mt-4 text-slate-700 space-y-2"></ul>
</section>

</main>

<script>
  (function () {
    // --- Config ambang & template rekomendasi per pilar ---
    const BUCKETS = [
      { key: 'very_low', range: s => s < 33, label: '<33%', color: 'bg-rose-100 text-rose-700 border-rose-200' },
      { key: 'low', range: s => s >= 33 && s <= 65, label: '33–65%', color: 'bg-amber-100 text-amber-700 border-amber-200' },
      { key: 'mid', range: s => s >= 66 && s <= 89, label: '66–89%', color: 'bg-lime-100 text-lime-700 border-lime-200' },
      { key: 'high', range: s => s >= 90 && s < 100, label: '≥90%', color: 'bg-teal-100 text-teal-700 border-teal-200' },
      { key: 'full', range: s => s === 100, label: '100%', color: 'bg-sky-100 text-sky-700 border-sky-200' },
    ];
    function getEconomicSuggestions(economicData, score) {
        if (score === 100) {
            return ['Data ekonomi komprehensif. Pertahankan konsistensi & tambahkan insight margin/efisiensi.'];
        }

        const suggestions = [];

        // Bagian 1: Informasi Dasar
        if (!economicData.responsible_person || !economicData.reporting_period) {
            suggestions.push('Lengkapi Bagian 1: Nama Unit, Periode Pelaporan, dan Penanggung Jawab.');
        }

        // Bagian 2: Pendapatan & Pengeluaran
        if (!economicData.revenue) {
            suggestions.push('Isi data Pendapatan agar laporan keuangan Anda dapat dianalisis.');
        }
        if (!economicData.general_admin_expenses) {
            suggestions.push('Lengkapi data General & Administrative expenses.');
        }
        if (!economicData.salary_expenses) {
            suggestions.push('Isi data Gaji & Upah.');
        }
        if (!economicData.transport_expenses) {
            suggestions.push('Lengkapi data biaya Transportasi.');
        }
        if (!economicData.fuel_expenses || !economicData.electricity_expenses) {
            suggestions.push('Isi data Bahan Bakar dan Listrik.');
        }
        if (!economicData.internet_expenses || !economicData.telephone_expenses || !economicData.water_expenses) {
            suggestions.push('Lengkapi data biaya Internet, Telepon, dan Air.');
        }
        if (!economicData.other_operating_expenses) {
            suggestions.push('Isi data Operasional Lainnya.');
        }
        if (!economicData.non_operating_expenses) {
            suggestions.push('Lengkapi data Non-Operasional.');
        }

        // Bagian 3: Catatan Tambahan
        if (!economicData.unusual_expenses) {
            suggestions.push('Berikan catatan jika ada Pengeluaran besar/tidak biasa.');
        }
        if (!economicData.accounting_corrections) {
            suggestions.push('Berikan catatan jika ada Koreksi akuntansi.');
        }

        if (suggestions.length === 0 && score < 100) {
            suggestions.push('Ada data yang terlewat, silakan periksa kembali formulir.');
        }

        return suggestions;
    }

    // Saran per pilar per bucket (Dummies for other pillars)
    const SUGGESTIONS = {
      economic: {
        very_low: [
          'Mulai dari dasar: isi lengkap Bagian 1 (Nama Unit, Periode, PIC).',
          'Tambahkan total pendapatan serta semua kategori biaya utama agar arus kas terbaca.'
        ],
        low: [
          'Lengkapi kategori biaya yang masih kosong (G&A, Gaji, Transportasi, Utilities).',
          'Tambahkan catatan koreksi/pengeluaran tak biasa jika ada sebagai konteks.'
        ],
        mid: [
          'Validasi angka antar kategori (fuel vs listrik, internet/telepon/air).',
          'Lampirkan ringkasan pengeluaran per akun untuk transparansi.'
        ],
        high: [
          'Data economic belum lengkap.',
          'Lengkapi bagian economic yang masing kosog'
        ],
        full: [
          'Data ekonomi komprehensif. Pertahankan konsistensi & tambahkan insight margin/efisiensi.'
        ]
      },
      environmental: {
        very_low: ['Isi minimal data Scope 1 & 2.', 'Tetapkan metode perhitungan emisi.'],
        low: ['Lengkapi inisiatif reduksi dan angka emisi.', 'Mulai inventaris Scope 3.'],
        mid: ['Tambahkan intensitas emisi.', 'Lampirkan bukti faktor emisi.'],
        high: ['Perkuat cakupan Scope 3 & verifikasi.', 'Siapkan target reduksi tahunan.'],
        full: ['Pelaporan lingkungan matang.', 'Pertahankan verifikasi & publikasi roadmap dekarbonisasi.']
      },
      social: {
        very_low: ['Isi status insiden K3 dan data dasar.', 'Masukkan program pelatihan K3 dan peserta.'],
        low: ['Lengkapi penyebab/lokasi insiden.', 'Unggah bukti pelatihan untuk validasi.'],
        mid: ['Tambahkan data penyakit akibat kerja.', 'Hitung LTIFR dan persentase karyawan terlatih.'],
        high: ['Kuatkan tren K3 kuartalan.', 'Lakukan drill/emergency response review terjadwal.'],
        full: ['Kinerja sosial solid.', 'Pertahankan budaya keselamatan.']
      },
      governance: {
        very_low: ['Tetapkan kebijakan inti.', 'Terbitkan komitmen kebijakan.'],
        low: ['Sosialisasikan kebijakan ke karyawan.', 'Tetapkan mekanisme pengawasan.'],
        mid: ['Tambahkan frekuensi evaluasi kebijakan.', 'Ukur kepatuhan dan tindak lanjut temuan.'],
        high: ['Perkuat risk management reporting.', 'Publikasikan ringkasan hasil audit tahunan.'],
        full: ['Kerangka tata kelola unggul.', 'Pertahankan transparansi & review berkala.']
      }
    };

    // --- Util ---
    const titleCase = s => s.charAt(0).toUpperCase() + s.slice(1);

    function pickBucket(score) {
      return BUCKETS.find(b => b.range(score)) || BUCKETS[0];
    }

    function renderBadges(container, scores) {
      container.innerHTML = '';
      Object.entries(scores).forEach(([pillar, score]) => {
        const b = pickBucket(score);
        const badge = document.createElement('span');
        badge.className = `inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs ${b.color}`;
        badge.innerHTML = `<strong>${titleCase(pillar)}</strong>: ${score}% <span class="opacity-70">(${b.label})</span>`;
        container.appendChild(badge);
      });
    }

    function renderRecommendations(listEl, scores) {
      listEl.innerHTML = '';
      Object.entries(scores).forEach(([pillar, score]) => {
        const b = pickBucket(score);
        const li = document.createElement('li');
        li.innerHTML = `<span class="font-semibold">${titleCase(pillar)}:</span> `;
        const ul = document.createElement('ul');
        ul.className = 'list-disc pl-5 mt-1 space-y-1';
        (SUGGESTIONS[pillar][b.key] || ['Lengkapi data dasar.']).forEach(txt => {
          const i = document.createElement('li');
          i.textContent = txt;
          ul.appendChild(i);
        });
        li.appendChild(ul);
        listEl.appendChild(li);
      });
    }

    // --- Bootstrap render ---
    const sec = document.getElementById('reco_section');
    if (!sec) return;

    // Ambil skor nyata untuk Economic, dan dummy untuk pilar lainnya
    const scores = {
      economic: Number(sec.dataset.scoreEconomic || 0),
      environmental: Number(sec.dataset.scoreEnvironmental || 0),
      social: Number(sec.dataset.scoreSocial || 0),
      governance: Number(sec.dataset.scoreGovernance || 0),
    };

    renderBadges(document.getElementById('reco_badges'), scores);
    renderRecommendations(document.getElementById('reco_list'), scores);
  })();
</script>
</body>
</html>
